(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2515510e"],{"120f":function(t,e,a){},2400:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"client-container"},[a("div",{staticClass:"client-header"},[t._v("\n        客户端管理\n    ")]),t._v(" "),a("el-tabs",{staticClass:"client-tab",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"first",label:"数据监控"}},[a("PartA")],1),t._v(" "),a("el-tab-pane",{attrs:{name:"second",label:"分组管理"}},[a("PartB")],1),t._v(" "),a("el-tab-pane",{attrs:{name:"third",label:"客户端管理"}},[a("PartC")],1)],1)],1)},n=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"client-partA"},[t._m(0),t._v(" "),a("div",{staticClass:"client-partA-right"},[t._m(1),t._v(" "),a("div",{staticClass:"client-partA-tool-bar"},[a("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:t.search_type,callback:function(e){t.search_type=e},expression:"search_type"}},[a("el-option",{attrs:{value:"name",label:"名称"}}),t._v(" "),a("el-option",{attrs:{value:"ip",label:"IP"}}),t._v(" "),a("el-option",{attrs:{value:"department",label:"部门"}})],1),t._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.search_words,callback:function(e){t.search_words=e},expression:"search_words"}}),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.search()}}},[t._v("搜索")])],1),t._v(" "),a("el-table",{staticStyle:{"font-size":"11px","margin-left":"5px"},attrs:{data:t.tableData.slice(8*(t.currentPage-1),8*t.currentPage),"header-cell-style":{background:"#eef1f6"},"row-style":{height:"20px"},"default-sort":{prop:"time",order:"descending"}}},[a("el-table-column",{attrs:{prop:"name",label:"客户端名称",width:"100px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"客户端IP",width:"100px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"times",label:"违规次数",width:"100px",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"部门",width:"100px"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"}},[[a("el-button",{attrs:{type:"text",size:"small"}},[t._v("详情")])]],2)],1),t._v(" "),a("el-pagination",{staticClass:"left-pagination",attrs:{"current-page":t.currentPage,layout:"prev, pager, next","page-size":t.pageSize,total:t.tableData.length},on:{"current-change":t.handleCurrentChange}})],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"client-partA-left"},[a("div",{staticClass:"title-header"},[a("div",{staticClass:"title-pic"}),t._v(" "),a("div",{staticClass:"title-text"},[t._v("客户端统计")])]),t._v(" "),a("div",{staticClass:"left-top"},[a("div",{staticClass:"partA-chart",attrs:{id:"client_chart"}}),t._v(" "),a("div",{staticClass:"partA-divider"})]),t._v(" "),a("div",{staticClass:"title-header"},[a("div",{staticClass:"title-pic"}),t._v(" "),a("div",{staticClass:"title-text"},[t._v("客户端违规日志")])]),t._v(" "),a("div",{staticClass:"left-bottom"},[a("div",{staticStyle:{"text-align":"center","margin-top":"50px","font-size":"12px"}},[t._v("\n                其他统计信息，待完善\n            ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-header"},[a("div",{staticClass:"title-pic"}),t._v(" "),a("div",{staticClass:"title-text"},[t._v("违规客户端统计")])])}],o=(a("ac6a"),a("c5f6"),a("b39f")),s={name:"PartA",data:function(){return{search_type:"",search_words:"",status_data:{total:"",online:"",validate:"",scan:"",normal:""},tableData:[],currentPage:1,pageSize:8}},watch:{status_data:function(t){this.setChart()}},mounted:function(){this.getChartData(),this.getTableData()},methods:{getChartData:function(){var t=this;Object(o["h"])().then((function(e){t.status_data=e.data}))},getTableData:function(){var t=this;Object(o["i"])(this.search_type,this.search_words).then((function(e){t.tableData=e.data}))},handleCurrentChange:function(t){this.currentPage=t},setChart:function(){var t=this.$echarts.init(document.getElementById("client_chart")),e=this.getOptions();t.setOption(e)},getOptions:function(){var t=this.status_data,e=Number(t.total),a=[Number(t.online),Number(t.validate),Number(t.scan),Number(t.normal)],l={value:24.2,text:"-",color:["rgba(36, 209, 209, 1)","rgba(252, 142, 108, 1)","rgba(68, 163, 252, 1)","rgba(165, 211, 255, 1)"],xAxis:["在线客户端","违规客户端","扫描客户端","未出现异常客户端"],values:a},n=[],i=[];l.values.forEach((function(t,a){var r=parseInt(100*t/e);i.push({text:"台\n\n\n\n",left:22*(a+1)-9-.5+"%",top:"52%",textAlign:"center",textStyle:{fontSize:"12",color:"rgba(0,0,0,0.5)",fontWeight:"400"},subtext:l.xAxis[a],subtextStyle:{fontSize:"12",color:"rgba(0,0,0,0.5)",fontWeight:"400"}}),n.push({type:"pie",radius:["62","65"],center:[22*(a+1)-9+"%","50%"],hoverAnimation:!1,label:{normal:{position:"center"}},data:[{value:r,name:l.text,itemStyle:{normal:{color:l.color[a]}},label:{normal:{show:!1}}},{value:100-r,name:t,tooltip:{show:!1},itemStyle:{normal:{color:"#edf1f4"}},label:{normal:{formatter:t,textStyle:{fontSize:20,color:l.color[a]}}}}]})}));l.value;var r={title:i,series:n,grid:{top:"30px",left:"45px",right:"0",bottom:"39px"}};return r},search:function(){}}},c=s,u=(a("c052"),a("2877")),d=Object(u["a"])(c,i,r,!1,null,null,null),p=d.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"client-partB"},[a("div",{staticClass:"client-partB-toolbar"},[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){t.open_drawer=!0}}},[t._v("创建客户端分组")]),t._v(" "),a("el-autocomplete",{attrs:{"fetch-suggestions":t.querySearch,placeholder:"搜索分组",size:"mini"},on:{select:t.handleSelect},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[a("i",{staticClass:"el-icon-edit el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{type:"info",size:"mini",plain:""}},[t._v("清除")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%","font-size":"11px","margin-top":"10px"},attrs:{data:t.tableData2.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),"header-cell-style":{background:"#eef1f6"},"row-style":{height:"20px"},"default-sort":{prop:"time",order:"descending"}},on:{"selection-change":t.changeSelect}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"150px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"用户组名称",width:"150px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"comments",label:"备注",width:"200px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:"创建时间",width:"200px",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("组成员信息： 姓名        IP           创建时间")]),t._v(" "),a("div",[t._v(t._s(e.row.detail))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"}},[[a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"}},[t._v("编辑")])]],2)],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,layout:"prev, pager, next","page-size":t.pageSize,total:t.tableData2.length},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("div",{staticStyle:{float:"left","margin-top":"10px","margin-left":"60px"}},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.open_add_client=!0,t.getSelectedGroupName()}}},[t._v("添加组成员")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.addRules}},[t._v("添加监控规则")])],1),t._v(" "),a("el-drawer",{attrs:{title:"添加用户组","before-close":t.closeDrawer,visible:t.open_drawer,direction:"rtl",size:"40%"},on:{"update:visible":function(e){t.open_drawer=e}}},[a("div",{staticClass:"client-partB-drawer-content"},[a("el-form",{attrs:{model:t.form,"label-width":"100px","label-suffix":""}},[a("el-form-item",{attrs:{label:"组名称"}},[a("el-input",{staticStyle:{width:"300px"},on:{change:function(e){t.changed=!0}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:4},on:{change:function(e){t.changed=!0}},model:{value:t.form.comments,callback:function(e){t.$set(t.form,"comments",e)},expression:"form.comments"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"添加组成员"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.form.clients,callback:function(e){t.$set(t.form,"clients",e)},expression:"form.clients"}},t._l(t.noGroupClientsList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:t.closeDrawer}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.submitForm()}}},[t._v(t._s(t.loading?"提交中...":"确定"))])],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:"添加成员到选中组",visible:t.open_add_client},on:{"update:visible":function(e){t.open_add_client=e}}},[a("el-form",{attrs:{model:t.addClientForm}},[a("el-form-item",{attrs:{label:"已选中组：","label-width":"130px"}},[a("div",{staticStyle:{width:"300px"}},t._l(t.selectedGroup,(function(e){return a("div",{key:e,staticStyle:{float:"left",width:"80px"}},[t._v(t._s(e))])})),0)]),t._v(" "),a("el-form-item",{attrs:{label:"选择未被分组用户","label-width":"130px"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.addClientForm.clients,callback:function(e){t.$set(t.addClientForm,"clients",e)},expression:"addClientForm.clients"}},t._l(t.noGroupClientsList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.open_add_client=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addClients}},[t._v("确 定")])],1)],1)],1)},f=[],h=(a("7f7f"),{name:"PartB",data:function(){return{state:"",open_drawer:!1,changed:!1,form:{name:"",comments:"",clients:[]},noGroupClientsList:[],loading:!1,open_add_client:!1,addClientForm:{groups:[],clients:[]},tableData2:[],currentPage:1,pageSize:8,selectedRowId:[],selectedRowName:[],selectedGroup:[]}},mounted:function(){this.getTableData2(),this.getNoGroupClientsData()},methods:{getTableData2:function(){var t=this;Object(o["d"])().then((function(e){t.tableData2=e.data}))},handleCurrentChange:function(t){this.currentPage=t},getNoGroupClientsData:function(){var t=this;Object(o["g"])().then((function(e){t.noGroupClientsList=e.data}))},changeSelect:function(t){var e=this,a=t;this.selectedRowId=[],this.selectedRowName=[],a.forEach((function(t){e.selectedRowId.push(t.id),e.selectedRowName.push(t.name)}))},getSelectedGroupName:function(){this.selectedGroup=this.selectedRowName},formClear:function(){this.form={name:"",comments:"",clients:[]}},formClear2:function(){this.addClientForm={groups:[],clients:[]}},closeDrawer:function(){var t=this;this.changed?this.$confirm("还有未提交表单，是否退出？").then((function(e){t.changed=!1,t.formClear(),t.open_drawer=!1})):(this.formClear(),this.open_drawer=!1)},submitForm:function(){var t=this;this.loading=!0,Object(o["a"])(this.form).then((function(e){200==e.code?(t.loading=!1,t.formClear(),t.open_drawer=!1,t.changed=!1):t.$confirm("提交失败，请重试").then((function(e){t.loading=!1}))}))},addClients:function(){this.addClientForm.groups=this.selectedRowId,this.formClear2(),this.open_add_client=!1},addRules:function(){},querySearch:function(){},handleSelect:function(){}}}),v=h,b=(a("91c3"),Object(u["a"])(v,m,f,!1,null,null,null)),_=b.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"client-partC"},[a("div",{attrs:{sytle:"float:left;margin:10px;"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.drawer=!0}}},[t._v("新建客户端")]),t._v(" "),a("el-autocomplete",{attrs:{"fetch-suggestions":t.querySearch,placeholder:"搜索分组",size:"mini"},on:{select:t.handleSelect},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[a("i",{staticClass:"el-icon-edit el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),t._v(" "),a("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"分组筛选",size:"mini"},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}},[a("el-option",{attrs:{value:"123"}},[t._v("销售一组")])],1),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{type:"info",size:"mini",plain:""}},[t._v("清除")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%","font-size":"11px","margin-top":"10px"},attrs:{data:t.tableData3.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),"header-cell-style":{background:"#eef1f6"},"row-style":{height:"20px"},"default-sort":{prop:"time",order:"descending"}}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"客户端名称",width:"150px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"客户端IP",width:"200px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"comments",label:"备注",width:"200px",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"分组状态",width:"150px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:"创建时间",width:"200px",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.detail))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"}},[[a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"}},[t._v("编辑")])]],2)],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,layout:"prev, pager, next","page-size":t.pageSize,total:t.tableData3.length},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("div",{staticStyle:{float:"left","margin-top":"10px","margin-left":"60px"}},[a("el-button",{attrs:{size:"small"}},[t._v("添加到组")]),t._v(" "),a("el-button",{attrs:{size:"small"}},[t._v("添加监控规则")])],1)],1)},x=[],y={name:"PartC",data:function(){return{state:"",group:"",tableData3:[],currentPage:1,pageSize:8}},mounted:function(){this.getTableData3()},methods:{handleCurrentChange:function(t){this.currentPage=t},getTableData3:function(){var t=this;Object(o["b"])().then((function(e){t.tableData3=e.data}))},querySearch:function(){},handleSelect:function(){}}},w=y,C=Object(u["a"])(w,g,x,!1,null,null,null),S=C.exports,z={components:{PartA:p,PartB:_,PartC:S},data:function(){return{activeName:"first"}},methods:{}},k=z,P=(a("353c"),Object(u["a"])(k,l,n,!1,null,null,null));e["default"]=P.exports},"353c":function(t,e,a){"use strict";var l=a("120f"),n=a.n(l);n.a},"40aa":function(t,e,a){},"429a":function(t,e,a){},"91c3":function(t,e,a){"use strict";var l=a("40aa"),n=a.n(l);n.a},b39f:function(t,e,a){"use strict";a.d(e,"e",(function(){return n})),a.d(e,"a",(function(){return i})),a.d(e,"d",(function(){return r})),a.d(e,"c",(function(){return o})),a.d(e,"f",(function(){return s})),a.d(e,"h",(function(){return c})),a.d(e,"i",(function(){return u})),a.d(e,"b",(function(){return d})),a.d(e,"g",(function(){return p}));var l=a("b775");function n(){return Object(l["a"])({url:"/dlp/client/group",method:"get"})}function i(t){return Object(l["a"])({url:"/dlp/client/group",method:"post",params:{form:t}})}function r(){return Object(l["a"])({url:"/dlp/client/infogroup",method:"get"})}function o(){return Object(l["a"])({url:"/dlp/client/list",method:"get"})}function s(){return Object(l["a"])({url:"/dlp/client/ip",method:"get"})}function c(){return Object(l["a"])({url:"/dlp/client/status",method:"get"})}function u(t,e){return Object(l["a"])({url:"/dlp/client/validateinfo",method:"get",params:{type:t,key:e}})}function d(){return Object(l["a"])({url:"/dlp/client/info",method:"get"})}function p(){return Object(l["a"])({url:"/dlp/client/nogroup",method:"get"})}},c052:function(t,e,a){"use strict";var l=a("429a"),n=a.n(l);n.a}}]);